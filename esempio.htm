<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="it">
<head>

	<title>Menu' contestuale - Esempio JavaScript scaricato da HTML.it</title>
	<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
	<meta http-equiv="Content-Language" content="it" />
	<meta name="Robots" content="All" />
	<meta name="Description" content="HTML.it - il sito italiano sul Web publishing" />
	<meta name="Keywords" content="Lo script è un menù contestuale che sostiusce l'originale del browser quando si preme il tasto destro del mouse." />
	<meta name="Owner" content="HTML.it srl" /> 
	<meta name="Author" content="HTML.it srl" />  
	<meta name="Copyright" content="HTML.it srl" />

<style type="text/css">
.link{
cursor:hand;
text-decoration:none;
font-size:11px;
font-family:verdana;
color:#000000;
padding:3px;
}

.normtext{
cursor:default;
color:#006699;
font-size:11px;
font-family:verdana;
font-weight:bold;
padding:3;
}

#conmenu {
position:absolute;
top:0px;
left:0px;
visibility:hidden;
background-color:#f0f0f0;
layer-background-color:#f0f0f0;
border:outset 2px;
font-size:11px;
font-family:verdana;
font-weight:normal;
width:150px;
padding:1 2 0 2;
z-index:2;
}

#conshadow{
position:absolute;
top:0px;
left:0px;
visibility:hidden;
background-color:black;
layer-background-color:#333333;
z-index:0;
}
</style>

</head>
<body >
<br /><br />
<div align="center">


<script language="javascript">

var menuNormColor="#f0f0f0";
var menuHoverColor="#6873f8";
var enableShadow=true;
var enableShadowTransparency=true;
var disableNS4=false;

var menu=new Array();
menu[0]=['<div align=\"center\">.: JavaScript :.</div>'];
menu[1]=['Alert Box' , 'javascript:alert(\'Ma ciao! Io sono un altert!\')' , ''];
menu[2]=['Contact' , 'mailto:prova@html.it' , ''];
menu[3]=['Stampa' , 'javascript:window.print();' , ''];
menu[4]=['Aggiorna la pagina' , 'javascript:history.go(0)', ''];
menu[5]=['Codice sorgente' , 'view-source:'+location.href, ''];
menu[6]=['<div align="center">.: Link utili :.</div>'];
menu[7]=['Html.it' , 'http://www.html.it' , '_blank'];
menu[8]=['Forum' , 'http://forum.html.it' , '_blank'];
menu[9]=['Freephp' , 'http://freephp.html.it' , '_blank'];
menu[10]=['<div align="center">Tasto destro per chiudere il menù</div>'];

ns4 = (navigator.appName.indexOf("Netscape")>=0 && document.layers)? true : false;
ie4 = (document.all && !document.getElementById)? true : false;
ie5 = (document.all && document.getElementById)? true : false;
ns6 = (document.getElementById && navigator.appName.indexOf("Netscape")>=0 )? true: false;
w3c = (document.getElementById)? true : false;
var mx=0;
var my=0;
var conmenu;
var conshadow;
var windowloaded=false;
var opened=false;
var ch=0;
var cw=0;

function setc(ref,c){
if(ns4)ref.bgColor=c;
else ref.style.backgroundColor=c;
}

var txt='<div id="conshadow"> </div>';
txt+='<div id="conmenu">';
for(i=0;i<menu.length;i++){
if(menu[i].length<3){
txt+='<ilayer><div class="normtext">'+menu[i][0]+'</div></ilayer>';
}else{
txt+=(ns4)?'<ilayer width="100%" bgcolor="'+menuNormColor+'"><layer width="100%" onmouseover="setc(this,\''+menuHoverColor+'\')" onmouseout="setc(this,\''+menuNormColor+'\')">':'<div class="link" style="background-color:'+menuNormColor+'" onmouseover="setc(this,\''+menuHoverColor+'\')" onmouseout="setc(this,\''+menuNormColor+'\')">';
txt+='<a href="'+menu[i][1]+'" target="'+menu[i][2]+'" class="link">'+menu[i][0]+'</a>';
txt+=(ns4)?'</layer></ilayer>':'</div>';
}}
txt+='</div>';
document.write(txt);

function ns4trap(evt){
if(evt.which==2||evt.which==3){
showmenu();
return false;
}}

function showmenu(){
if(windowloaded){
if(opened){
if(ns4){
conmenu.visibility="hide";
conshadow.visibility="hide";
conmenu.moveTo(0,0);
conshadow.moveTo(0,0);
}else{
conmenu.style.visibility="hidden";
conshadow.style.visibility="hidden";
conmenu.style.left='0px';
conmenu.style.top='0px';
conshadow.style.left='0px';
conshadow.style.top='0px';
}
opened=false;
}else{
opened=true;
var wh=(ie4||ie5)?document.body.clientHeight:window.innerHeight;
var ww=(ie4||ie5)?document.body.clientWidth:window.innerWidth;
var sx=(ie4||ie5)?document.body.scrollLeft:pageXOffset;
var sy=(ie4||ie5)?document.body.scrollTop:pageYOffset;
if(ie4||ie5){
if(mx+cw+13>=ww)mx=mx-cw-13;
if(my+ch+13>=wh)my=my-ch-13;
}else{
if(mx+cw-sx+13>=ww)mx=mx-cw-13;
if(my+ch-sy+13>=wh)my=my-ch-13;
}
if(ns4){
conmenu.moveTo(mx,my);
conmenu.visibility="show";
conshadow.moveTo(mx+8,my+8);
if(enableShadow)conshadow.visibility="show";
}else{
conmenu.style.left=mx+((ie4||ie5)?sx:0)+'px';
conmenu.style.top=my+((ie4||ie5)?sy:0)+'px';
conshadow.style.left=mx+10+((ie4||ie5)?sx:0)+'px';
conshadow.style.top=my+10+((ie4||ie5)?sy:0)+'px';
setTimeout('conmenu.style.visibility="visible"; if(enableShadow)conshadow.style.visibility="visible"; ',50);
}}}}

if(ns4&&!disableNS4){
document.captureEvents(Event.MOUSEDOWN|Event.MOUSEMOVE);
document.onmousedown=ns4trap;
}else{
document.oncontextmenu=function(){
showmenu();
return false;
}}

document.onmousemove=function(evt){
mx=(ie4||ie5)?event.clientX:evt.pageX;
my=(ie4||ie5)?event.clientY:evt.pageY;
}

window.onload=function(){
  windowloaded=true;
  conmenu=(ns4)?document.layers['conmenu']:(ie4)?document.all['conmenu']:document.getElementById('conmenu');
  conshadow=(ns4)?document.layers['conshadow']:(ie4)?document.all['conshadow']:document.getElementById('conshadow');
  ch=(ns4)?conmenu.document.height:(ie4||ie5)?conmenu.clientHeight:conmenu.offsetHeight;
  cw=(ns4)?conmenu.document.width:(ie4||ie5)?conmenu.clientWidth:conmenu.offsetWidth;
  if(ns4){
  conshadow.clip.height=conmenu.document.height;
  conshadow.clip.width=conmenu.document.width;
  conmenu.clip.bottom=conmenu.document.height;
  }else{
  if(enableShadowTransparency){
  if(ie4||ie5)conshadow.style.filter="alpha(opacity=50)";
  if(ns6||!ie4||!ie5)conshadow.style.MozOpacity=.5;
  }
  conshadow.style.height=ch+((ie4||ie5)?4:0);
  conshadow.style.width=cw+((ie4||ie5)?4:0);
  }

}

window.onresize=function(){
if(ns4)setTimeout('history.go(0)',200);

}
</script>


</div>
<br /><br /><br /><br /><br /><br />
	<div align="center">
<a href="http://www.html.it"><img src="logo_htmlit.gif" alt="JavaScript scaricato da HTML.it" border="0" width="50" height="50" /></a>
	</div>
	

</body>
</html>